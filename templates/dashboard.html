{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom border-secondary">
    <h1 class="h2">Dashboard Overview</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Log View</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card p-3 h-100">
            <h6 class="text-secondary">IRAN SERVER (MASTER)</h6>
            <h3 class="text-white">Active ✅</h3>
            <p class="small text-muted mb-0">CPU: 12% | RAM: 1.4GB / 4GB</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-3 h-100" style="border-color: var(--silver);">
            <h6 class="text-secondary">FOREIGN SERVER (SLAVE)</h6>
            <h3 class="text-danger">Not Connected ❌</h3>
            <button class="btn btn-sm btn-outline-light mt-2 w-50" data-bs-toggle="modal" data-bs-target="#connectModal">Connect Now</button>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-3 h-100">
            <h6 class="text-secondary">ACTIVE TUNNELS</h6>
            <h3 style="color: var(--slytherin-green);">0</h3>
            <p class="small text-muted mb-0">Total Bandwidth: 0 GB</p>
        </div>
    </div>
</div>

<h4 class="mt-5 mb-3 text-secondary">Available Modules (On-Demand)</h4>
<div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
    
    <div class="col">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title text-white"><i class="fa-solid fa-bolt text-warning"></i> Backhaul Tunnel</h5>
                <p class="card-text text-muted">High-performance reverse tunnel. Best for TCP traffic and low latency gaming.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-alamor disabled">Install & Config</button> </div>
            </div>
            <div class="card-footer border-secondary">
                <small class="text-muted">Status: Not Installed</small>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title text-white"><i class="fa-solid fa-dungeon text-info"></i> Rathole Tunnel</h5>
                <p class="card-text text-muted">Secure, rust-based tunnel. Ideal for bypassing heavy censorship.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-alamor disabled">Install & Config</button>
                </div>
            </div>
            <div class="card-footer border-secondary">
                <small class="text-muted">Status: Not Installed</small>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title text-white"><i class="fa-brands fa-cloudflare text-warning"></i> Clean IP Scanner</h5>
                <p class="card-text text-muted">Finds clean Cloudflare IPs and injects them into your X-UI config automatically.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-light">Open Scanner</button>
                </div>
            </div>
            <div class="card-footer border-secondary">
                <small class="text-muted">Idle</small>
            </div>
        </div>
    </div>

</div>

<div class="modal fade" id="connectModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark border-secondary">
      <div class="modal-header border-secondary">
        <h5 class="modal-title">Connect Foreign Server</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Server IP</label>
            <input type="text" class="form-control" placeholder="45.x.x.x">
          </div>
          <div class="mb-3">
            <label class="form-label">Root Password</label>
            <input type="password" class="form-control">
          </div>
          <p class="text-muted small"><i class="fa-solid fa-shield-halved"></i> SSH Keys will be generated automatically.</p>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-alamor">Establish Connection</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}